(()=>{"use strict";var e={8512:(e,s,t)=>{var o=t(6314);class r{constructor(e){this.chessjs=new o.d$(e)}evaluate(){const e={p:-1,n:-3,b:-3,r:-5,q:-9,P:1,N:3,B:3,R:5,Q:9},s=this.chessjs.fen();let t=0;for(let o=0;o<s.indexOf(" ");o++)e[s.charAt(o)]&&(t+=e[s.charAt(o)]);return t}minimax_root(e,s){return this.minimax(e,e,s)}minimax(e,s,t){let o=[];if(0===s){return{score:this.evaluate(),best:o}}const r=this.chessjs.moves({verbose:!0});if(t){let t=-999;for(let n=0;n<r.length;n++){this.chessjs.move(r[n]);let h=this.minimax(e,s-1,!1).score;this.chessjs.undo(),h>t?(t=h,o=[],o.push(r[n])):h===t&&o.push(r[n])}return{score:t,best:o}}{let t=999;for(let n=0;n<r.length;n++){this.chessjs.move(r[n]);let h=this.minimax(e,s-1,!0).score;this.chessjs.undo(),h<t?(t=h,o=[],o.push(r[n])):h===t&&o.push(r[n])}return{score:t,best:o}}}alphabeta_root(e,s){return console.log("=================="),this.alphabeta(e,e,-999,999,s)}alphabeta(e,s,t,o,r){let n=[];if(0===s){return{score:this.evaluate(),best:n}}const h=this.chessjs.moves({verbose:!0});if(r){let r=-999;for(let a=0;a<h.length;a++){this.chessjs.move(h[a]);let i=this.alphabeta(e,s-1,t,o,!1);e===s&&console.log("option: "+h[a].san+", score: "+i.score);let c=i.score;if(this.chessjs.undo(),c>r?(r=c,n=[],n.push(h[a])):c===r&&n.push(h[a]),t=Math.max(t,c),r>o)break}return{score:r,best:n}}{let r=999;for(let a=0;a<h.length;a++){this.chessjs.move(h[a]);let i=this.alphabeta(e,s-1,t,o,!0);e===s&&console.log("option: "+h[a].san+", score: "+i.score);let c=i.score;if(this.chessjs.undo(),c<r?(r=c,n=[],n.push(h[a])):c===r&&n.push(h[a]),o=Math.min(o,c),r<t)break}return{score:r,best:n}}}move_random(){const e=this.chessjs.moves({verbose:!0});for(let t=0;t<e.length;t++)console.log(e[t].to+", "+e[t].from+" : "+e[t].promotion);const s=e[Math.floor(Math.random()*e.length)];this.chessjs.move({from:s.from,to:s.to,promotion:s.promotion});return{fen:this.chessjs.fen(),from:s.from,to:s.to,san:s.san}}move_minimax(){let e=this.minimax_root(2,"w"===this.chessjs.turn()),s=e.best[Math.floor(Math.random()*e.best.length)];this.chessjs.move({from:s.from,to:s.to,promotion:s.promotion});return{fen:this.chessjs.fen(),from:s.from,to:s.to,san:s.san}}move_alphabeta(){let e=this.alphabeta_root(3,"w"===this.chessjs.turn()),s=e.best[Math.floor(Math.random()*e.best.length)];console.log("choice: "+s.san+", score: "+e.score),this.chessjs.move({from:s.from,to:s.to,promotion:s.promotion});return{fen:this.chessjs.fen(),from:s.from,to:s.to,san:s.san}}}onmessage=e=>{const s=new r(e.data);postMessage(s.move_alphabeta())}}},s={};function t(o){var r=s[o];if(void 0!==r)return r.exports;var n=s[o]={exports:{}};return e[o](n,n.exports,t),n.exports}t.m=e,t.x=()=>{var e=t.O(void 0,[314],(()=>t(8512)));return e=t.O(e)},(()=>{var e=[];t.O=(s,o,r,n)=>{if(!o){var h=1/0;for(l=0;l<e.length;l++){o=e[l][0],r=e[l][1],n=e[l][2];for(var a=!0,i=0;i<o.length;i++)(!1&n||h>=n)&&Object.keys(t.O).every((e=>t.O[e](o[i])))?o.splice(i--,1):(a=!1,n<h&&(h=n));if(a){e.splice(l--,1);var c=r();void 0!==c&&(s=c)}}return s}n=n||0;for(var l=e.length;l>0&&e[l-1][2]>n;l--)e[l]=e[l-1];e[l]=[o,r,n]}})(),t.d=(e,s)=>{for(var o in s)t.o(s,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:s[o]})},t.f={},t.e=e=>Promise.all(Object.keys(t.f).reduce(((s,o)=>(t.f[o](e,s),s)),[])),t.u=e=>"static/js/"+e+".b78506ac.chunk.js",t.miniCssF=e=>{},t.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),t.p="/lets-play-chess/",(()=>{var e={512:1};t.f.i=(s,o)=>{e[s]||importScripts(t.p+t.u(s))};var s=self.webpackChunkchess_one_player=self.webpackChunkchess_one_player||[],o=s.push.bind(s);s.push=s=>{var r=s[0],n=s[1],h=s[2];for(var a in n)t.o(n,a)&&(t.m[a]=n[a]);for(h&&h(t);r.length;)e[r.pop()]=1;o(s)}})(),(()=>{var e=t.x;t.x=()=>t.e(314).then(e)})();t.x()})();
//# sourceMappingURL=512.6fb73a04.chunk.js.map